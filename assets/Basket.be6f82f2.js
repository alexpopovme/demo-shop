import{d as h,c as f,o as _,a as c,b as e,t as d,u as k,s as r,p as v,r as p,w as I,l as y,F as g,j as q,C as N,g as w}from"./index.f7e2ccfa.js";import{c as C}from"./api.ed038255.js";const P={class:"basket-item"},T={class:"basket-item__image-wrap"},F=["src","alt"],D={class:"basket-item-info"},H={class:"basket-item-header"},V={class:"basket-item-header__number"},A={class:"basket-item-header__name"},E={class:"basket-item-body"},L={class:"basket-item-body__quantity"},Q=e("span",{class:"basket-item-body__quantity-text"}," Quantity ",-1),R={class:"basket-item-body__quantity-cont"},j={class:"basket-item-body__quantity-item"},O={class:"basket-item-body__price"},S=e("span",{class:"basket-item-body__price-text"}," Price ",-1),U={class:"basket-item-body__price-number"},W=h({__name:"BasketItem",props:{item:null,index:null},setup(t){const i=t,n=f(()=>{const a=r.getItemsInBasket().find(s=>s.id===i.item.id);return a?a.quantity:0});return(a,s)=>(_(),c("div",P,[e("div",T,[e("img",{class:"basket-item__image",src:t.item.thumbnailUrl,alt:t.item.name},null,8,F)]),e("div",D,[e("div",H,[e("span",V,d(t.index+1),1),e("span",A,d(t.item.name),1),e("button",{onClick:s[0]||(s[0]=b=>k(r).removeAllQuantityFromBasket(t.item.id)),type:"button",class:"basket-item-header__delete"}," \u2573 ")]),e("div",E,[e("div",L,[Q,e("div",R,[e("span",{class:"basket-item-body__quantity-item",onClick:s[1]||(s[1]=b=>k(r).removeFromBasket(t.item.id))},"-"),e("span",j,d(k(n)),1),e("span",{class:"basket-item-body__quantity-item",onClick:s[2]||(s[2]=b=>k(r).addToBasket(t.item.id))},"+")])]),e("div",O,[S,e("span",U,d(t.item.defaultDisplayedPriceFormatted),1)])])])]))}});const Y={class:"basket-header"},z={key:0,class:"basket-header__congrats-text-wrap"},G=e("span",{class:"basket-header__congrats-text"}," Congratulations on your purchase! ",-1),J=[G],K={key:1,class:"basket-header__text"},M=h({__name:"BasketHeader",props:{requestedItemsN:null,purchased:{type:Boolean}},setup(t){return(i,n)=>(_(),c("header",Y,[t.purchased?(_(),c("div",z,J)):(_(),c("span",K," You have "+d(t.requestedItemsN)+" item in your basket ",1))]))}});const X={key:0,class:"basket-buy-button-wrap"},Z=h({__name:"BasketBuyButton",props:{total:null},emits:["clicked:buy-now"],setup(t,{emit:i}){const n=()=>{i("clicked:buy-now")};return(a,s)=>t.total>0?(_(),c("div",X,[e("button",{class:"basket-buy-button",type:"button",onClick:n}," Buy Now ")])):v("",!0)}});const ee="/demo-shop/assets/thanks.9a6413d1.png",te={key:0,class:"basket-purchased"},se=e("img",{class:"basket-purchased__image",src:ee,alt:"Thank you"},null,-1),ae=[se],ne=h({__name:"BasketPurchased",props:{purchased:{type:Boolean}},setup(t){return(i,n)=>t.purchased?(_(),c("div",te,ae)):v("",!0)}});const oe={key:0,class:"basket-total"},_e=e("span",{class:"basket-total__text"},"TOTAL:",-1),ie={class:"basket-total__num"},ce=h({__name:"BasketTotal",props:{total:null},setup(t){const i="\u20BD";return(n,a)=>t.total>0?(_(),c("div",oe,[_e,e("span",ie,d(t.total)+d(i),1)])):v("",!0)}});const ue={class:"basket-main"},le={class:"basket-main__inner"},me=h({__name:"Basket",setup(t){const i=N(),n=p(!1),a=p([]),s=p(0),b=o=>{a.value=o,s.value=o.length},B=f(()=>r.getItemsInBasket().reduce((u,l)=>{const m=a.value.find($=>$.id===l.id);return m?u+=l.quantity*m.price:u},0)),x=()=>{r.emptyBasket(),n.value=!0};return I(()=>{const o=r.getItemsInBasket();if(o.length===0){b([]),n.value||i.push({name:"Home"});return}if(a.value.length>=o.length){const u=a.value.filter(l=>o.some(m=>m.id===l.id));b(u);return}s.value=o.length,C(o).then(u=>{!u||(a.value=u.items)})}),(o,u)=>(_(),c(g,null,[y(M,{requestedItemsN:s.value,purchased:n.value},null,8,["requestedItemsN","purchased"]),e("main",ue,[e("div",le,[(_(!0),c(g,null,q(a.value,(l,m)=>(_(),w(W,{key:l.id,item:l,index:m},null,8,["item","index"]))),128)),y(ce,{total:k(B)},null,8,["total"]),y(Z,{total:k(B),"onClicked:buyNow":x},null,8,["total"]),y(ne,{purchased:n.value},null,8,["purchased"])])])],64))}});export{me as default};
